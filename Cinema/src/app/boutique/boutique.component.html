<div class="page">
  <br />
  <div class="titre">
    <h2>Boutique</h2>
  </div>
  <br />
  <div class="contenu">
    <ul class="grille-produits">
      <li *ngFor="let produit of produits">
        <div class="image">
          <img [src]="produit.image" alt="{{ produit.nom }}" />
        </div>
        <div class="nomImage">
          <h4>{{ produit.nom }}</h4>
        </div>
        <p>Prix : {{ produit.prix }} €</p>
        <button class="btn btn-primary" (click)="ajouterAuPanier(produit)">
          Ajouter au panier
        </button>
      </li>
    </ul>
  </div>

  <div class="panier" (click)="afficherPanier()">
    <img src="assets/boutique/panier.png" alt="Panier" />
    <span class="badge" [ngClass]="{ 'badge-danger': nbProduitsPanier > 0 }">{{
      nbProduitsPanier
    }}</span>
    <p>Panier</p>
  </div>

  <div class="fenetre-contextuelle" *ngIf="panierVisible">
    <div class="contenu-fenetre">
      <div class="panier-detail">
        <h3>Vos achats</h3>
        <p>(Pour fermer cette fenêtre, cliquez à nouveau sur l'icône du panier)</p>
        <ul>
          <li *ngFor="let produit of panier">
            {{ produit.nom }} - {{ produit.prix }} €
          </li>
        </ul>
        <p>Total : {{ calculerTotal() | number : ".2-2" }} €</p>
        <button class="btn btn-primary acheter" (click)="ouvrirFenetreAchat()">
          Acheter
        </button>
        <div class="fenetre-contextuelle" *ngIf="fenetreAchatVisible">
          <div class="contenu-fenetre">
            <span class="croix" (click)="fermerFenetreAchat()">X</span>
            <img src="assets/boutique/victoire.gif" alt="">
            <p>Merci d'avoir dépensé votre argent chez nous !</p>
          </div>
        </div>
        <button class="btn btn-primary" (click)="viderPanier()">
          Vider le panier
        </button>
      </div>
    </div>
  </div>
</div>
